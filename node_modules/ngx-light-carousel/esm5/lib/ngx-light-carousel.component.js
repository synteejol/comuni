import { __decorate, __metadata, __param } from "tslib";
import { isPlatformBrowser } from '@angular/common';
import { AfterViewInit, ChangeDetectorRef, Component, ContentChild, ContentChildren, ElementRef, EmbeddedViewRef, EventEmitter, HostListener, Inject, Input, NgZone, OnChanges, OnDestroy, OnInit, Output, PLATFORM_ID, QueryList, Renderer2, TemplateRef, ViewChild, ViewContainerRef, ViewEncapsulation, } from '@angular/core';
import * as Hammer from 'hammerjs';
import { interval, Subject } from 'rxjs';
import { throttle } from 'rxjs/operators';
import { NgxCarouselItemDirective } from './ngx-light-carousel-item.directive';
import { ngxLightOptions } from './ngx-light-carousel.model';
var NgxCarouselComponent = /** @class */ (function () {
    function NgxCarouselComponent(platformId, _renderer, zone, cd) {
        var _this = this;
        this.platformId = platformId;
        this._renderer = _renderer;
        this.zone = zone;
        this.cd = cd;
        this.current = 0;
        this.currentChange = new EventEmitter();
        this.infiniteElmRefs = [];
        this.timeLeft = 2000;
        this.dotsLoading = true;
        this.loading = true;
        this.grabbing = false;
        this.arrowsVisible = true;
        this.addPanningClass = function () {
            _this.grabbing = true;
            _this._renderer.addClass(_this.elements().rootElement, 'grabbing');
            _this._renderer.addClass(_this.elements().containerElement, 'panning');
        };
        this.removePanningClass = function () {
            _this.grabbing = false;
            _this._renderer.removeClass(_this.elements().rootElement, 'grabbing');
            _this._renderer.removeClass(_this.elements().containerElement, 'panning');
        };
        this.addAnimationClass = function () {
            if (_this.options.animation.animationClass !== '') {
                _this._renderer.addClass(_this.elements().containerElement, _this.options.animation.animationClass);
            }
        };
        this.removeAnimationClass = function () {
            if (_this.options.animation.animationClass !== '') {
                _this._renderer.removeClass(_this.elements().containerElement, _this.options.animation.animationClass);
            }
        };
        this.panTo = function (value) {
            if (isPlatformBrowser(_this.platformId)) {
                _this._renderer.setStyle(_this.elements().containerElement, 'transform', "translate3d(" + value + "px, 0,0)");
            }
            else {
                _this._renderer.setStyle(_this.elements().containerElement, 'transform', "translate3d(" + value + "%, 0,0)");
            }
        };
        this.currentIndex = function (number) {
            if (!_this.infiniteMode() && number !== undefined) {
                if (number >= 0) {
                    if (number < 0) {
                        _this.current = 0;
                        // } else if (this.currentBreakpoint().number % 1 != 0 && this.current - 1 > this.data.length) {
                        // 	this.current = this.data.length + 1 - this.currentBreakpoint().number
                    }
                    else if (number > _this.data.length - _this.currentBreakpoint().number) {
                        _this.current = _this.data.length - _this.currentBreakpoint().number;
                    }
                    else {
                        _this.current = number;
                    }
                }
            }
            else if (number != undefined) {
                _this.current = number;
            }
            return _this.current;
        };
        this.slowOnOutOfBounds = function (e) {
            if (!_this.options.infinite && _this.outOfBound()) {
                e.deltaX *= 0.2;
                e.deltaY *= 0.2;
            }
            return e;
        };
        this.scrollBackToEdge = function () {
            var root = _this.elements().rootElement.getBoundingClientRect();
            var container = _this.elements().containerElement.getBoundingClientRect();
            if (container.right < root.right) {
                _this.goToIndex(_this.visibleElements());
            }
            if (root.left - container.left < 0) {
                _this.goToIndex(0);
            }
        };
        this.outOfBound = function () {
            var root = _this.elements().rootElement.getBoundingClientRect();
            var container = _this.elements().containerElement.getBoundingClientRect();
            if (root.right - container.right > 0) {
                _this.currentIndex(_this.data.length - 1);
                return true;
            }
            if (root.left - container.left < 0) {
                _this.currentIndex(0);
                return true;
            }
            return false;
        };
        this.detectSwipingLeft = function (e) {
            return e.velocityX < -_this.options.swipe.swipeVelocity;
        };
        this.detectSwipingRight = function (e) {
            return e.velocityX > _this.options.swipe.swipeVelocity;
        };
        this.detectPanningLeft = function (e) {
            return e.velocityX < 1 && e.distance < -_this.carouselItemWidthVar * 1.5;
        };
        this.detectPanningRight = function (e) {
            return e.velocityX > 1 && e.distance < _this.carouselItemWidthVar * 1.5;
        };
        this.nextSlide = function () {
            _this.addAnimationClass();
            if (_this.data.length > 1) {
                if (!_this.infiniteMode() && _this.visibleElements() < _this.currentIndex()) {
                    _this.goToIndex(_this.visibleElements());
                }
                else {
                    _this.goToIndex(_this.currentIndex() + 1);
                }
            }
            setTimeout(function () {
                _this.removeAnimationClass();
            }, _this.options.animation.animationTime);
        };
        this.prevSlide = function () {
            _this.addAnimationClass();
            if (_this.data.length > 1) {
                if (!_this.infiniteMode() && 0 >= _this.currentIndex()) {
                    _this.goToIndex(_this.currentIndex(0));
                }
                else {
                    _this.goToIndex(_this.currentIndex() - 1);
                }
            }
            setTimeout(function () {
                _this.removeAnimationClass();
            }, _this.options.animation.animationTime);
        };
        this.startTimer = function () {
            _this.zone.runOutsideAngular(function () {
                var autoplay = _this.autoplayMode();
                if (autoplay && autoplay.enabled) {
                    _this.interval = setInterval(function () {
                        if (_this.timeLeft > 0) {
                            _this.timeLeft = _this.timeLeft - 100;
                        }
                        else {
                            _this.timeLeft = JSON.parse(JSON.stringify(autoplay.delay));
                            _this.actionDelay.next(autoplay.direction == 'left' ? _this.prevSlide : _this.nextSlide);
                        }
                    }, 100);
                }
            });
        };
        this.pauseTimer = function () {
            _this.zone.runOutsideAngular(function () {
                try {
                    var autoplay = _this.autoplayMode();
                    if (autoplay && autoplay.enabled) {
                        _this.timeLeft = JSON.parse(JSON.stringify(autoplay.delay));
                        clearInterval(_this.interval);
                    }
                    _this.timeLeft = JSON.parse(JSON.stringify(autoplay.delay));
                    delete _this.interval;
                }
                catch (_a) { }
            });
        };
        this.goToIndex = function (number) {
            if (_this.infiniteMode()) {
                _this.panTo(-_this.carouselItemWidth() * number);
            }
            else {
                if (number > -1 && number <= _this.data.length - _this.currentBreakpoint().number) {
                    _this.currentIndex(number);
                    _this.panTo(-_this.carouselItemWidth() * number);
                }
                if (number <= -1) {
                    _this.currentIndex(0);
                    _this.goToIndex(0);
                }
            }
            _this.currentIndex(number);
        };
        this.calculateMoved = function (e) {
            var moved = Math.round(Math.abs(e.deltaX) / _this.carouselItemWidth());
            return moved > 0 ? moved : 1;
        };
        this.loading = true;
        this.actionDelay = new Subject();
        this.throttleSub = this.actionDelay.asObservable();
        this.subRef = this.throttleSub.pipe(throttle(function (val) { return interval(_this.options.animation.animationTime + 40); })).subscribe(function (data) {
            data();
        });
    }
    NgxCarouselComponent.prototype.click = function (fn) {
        this.actionDelay.next(fn);
    };
    NgxCarouselComponent.prototype.ngOnInit = function () {
        this.dots = [];
    };
    NgxCarouselComponent.prototype.ngAfterViewInit = function () {
        this.init();
        this.loading = false;
        if (this.sufficientSlides()) {
            if (this.infiniteMode()) {
                this.addInfiniteElm();
            }
            if (this.autoplayMode()) {
                this.startTimer();
            }
        }
        this.goToIndex(this.current);
        this.rootElmWidth;
        this.setViewWidth();
        this.calculateDots();
    };
    NgxCarouselComponent.prototype.ngOnChanges = function () {
        if (this.elements()) {
            this.onResize();
        }
    };
    NgxCarouselComponent.prototype.ngOnDestroy = function () {
        this.pauseTimer();
        this.subRef.unsubscribe();
    };
    NgxCarouselComponent.prototype.onResize = function () {
        this.rootElmWidth;
        this.setViewWidth();
        this.calculateDots();
        if (this.sufficientSlides()) {
            if (this.infiniteMode()) {
                this.addInfiniteElm();
            }
        }
        this.goToIndex(this.currentIndex());
    };
    NgxCarouselComponent.prototype.sufficientSlides = function () {
        this.showArrows(this.data.length > this.currentBreakpoint().number);
        return this.data.length > this.currentBreakpoint().number;
    };
    NgxCarouselComponent.prototype.showArrows = function (state) {
        this.arrowsVisible = state;
    };
    NgxCarouselComponent.prototype.rootElmWidth = function () {
        return isPlatformBrowser(this.platformId) ? this.elements().rootElement.getBoundingClientRect().width : 100;
    };
    NgxCarouselComponent.prototype.carouselItemWidth = function () {
        if (this.data.length > this.currentBreakpoint().number) {
            return (this.carouselItemWidthVar = this.rootElmWidth() / this.currentBreakpoint().number);
        }
        else {
            return (this.carouselItemWidthVar = this.rootElmWidth() / this.data.length);
        }
    };
    NgxCarouselComponent.prototype.currentBreakpoint = function () {
        for (var i = 0; i < this.options.breakpoints.length; i++) {
            if (this.options.breakpoints[i].width > this.rootElmWidth()) {
                return this.options.breakpoints[i];
            }
        }
    };
    NgxCarouselComponent.prototype.elements = function () {
        if (this.sliderElement) {
            return {
                rootElement: this.sliderElement.nativeElement,
                containerElement: this.sliderElement.nativeElement.children[0],
                carouselItems: this.carouselItems.toArray().map(function (x) { return x.nativeElement; }),
            };
        }
        return;
    };
    NgxCarouselComponent.prototype.setViewWidth = function () {
        var _this = this;
        this._renderer.setStyle(this.elements().containerElement, 'display', 'inline-flex');
        this._renderer.setStyle(this.elements().containerElement, 'position', 'relative');
        this.elements().carouselItems.forEach(function (element) {
            _this._renderer.addClass(element, 'slide');
            _this._renderer.setStyle(element, 'width', _this.carouselItemWidth() + 'px');
            _this._renderer.setStyle(element, 'display', 'inline-flex');
        });
        if (this.infiniteMode()) {
            this.infiniteElmRefs.forEach(function (ref) {
                _this._renderer.addClass(ref.rootNodes[0], 'slide');
                _this._renderer.setStyle(ref.rootNodes[0], 'width', _this.carouselItemWidth() + 'px');
            });
        }
    };
    NgxCarouselComponent.prototype.hover = function () {
        if (this.autoplayMode()) {
            if (this.autoplayMode().stopOnHover) {
                this.pauseTimer();
            }
        }
    };
    NgxCarouselComponent.prototype.unhover = function () {
        if (this.autoplayMode()) {
            this.pauseTimer();
            this.startTimer();
        }
    };
    NgxCarouselComponent.prototype.calculateDots = function () {
        this.dots = [];
        if (this.infiniteMode()) {
            var number = this.data.length;
        }
        else {
            var number = this.data.length - this.currentBreakpoint().number + 1;
        }
        if (number > 1) {
            var results = Array.from(Array(Number(number.toFixed(0))).keys());
            this.dots = results;
            this.dotsLoading = false;
            return results;
        }
        else {
            var results = [];
            this.dots = [];
            this.dotsLoading = false;
            return results;
        }
    };
    NgxCarouselComponent.prototype.visibleElements = function () {
        return this.data.length - this.currentBreakpoint().number;
    };
    NgxCarouselComponent.prototype.addInfiniteElm = function () {
        this.infiniteElmRefs = [];
        this.infiniteContainer.clear();
        for (var i = 1; i <= this.data.length; i++) {
            var elm = this.infiniteContainer.createEmbeddedView(this.contentContent, {
                $implicit: this.data[this.data.length - i],
                index: this.data.length - i,
            });
            this._renderer.setStyle(elm.rootNodes[0], 'position', 'absolute');
            this._renderer.setStyle(elm.rootNodes[0], 'transform', "translate3d(-" + 100 * i + "%, 0,0)");
            this._renderer.setStyle(elm.rootNodes[0], 'display', 'inline-flex');
            this._renderer.setStyle(elm.rootNodes[0], 'visibility', 'visible');
            this._renderer.setStyle(elm.rootNodes[0], 'width', this.carouselItemWidthVar + 'px');
            this._renderer.addClass(elm.rootNodes[0], 'slide');
            var elm2 = this.infiniteContainer.createEmbeddedView(this.contentContent, {
                $implicit: this.data[i - 1],
                index: i - 1,
            });
            this._renderer.setStyle(elm2.rootNodes[0], 'position', 'absolute');
            this._renderer.setStyle(elm2.rootNodes[0], 'right', 0);
            this._renderer.setStyle(elm2.rootNodes[0], 'top', 0);
            this._renderer.setStyle(elm2.rootNodes[0], 'transform', "translate3d(" + 100 * i + "%, 0,0)");
            this._renderer.setStyle(elm2.rootNodes[0], 'display', 'inline-flex');
            this._renderer.setStyle(elm2.rootNodes[0], 'visibility', 'visible');
            this._renderer.setStyle(elm2.rootNodes[0], 'width', this.carouselItemWidthVar + 'px');
            this._renderer.addClass(elm2.rootNodes[0], 'slide');
            elm.detectChanges();
            elm2.detectChanges();
            this.infiniteElmRefs.push(elm);
            this.infiniteElmRefs.push(elm2);
        }
    };
    NgxCarouselComponent.prototype.infiniteHandler = function () {
        var _this = this;
        // this.removePanningClass()
        this.addAnimationClass();
        setTimeout(function () {
            _this.goToIndex(_this.currentIndex());
            _this.removeAnimationClass();
        }, this.options.animation.animationTime);
        if (0 > this.currentIndex()) {
            this.currentIndex(this.data.length - 1);
            setTimeout(function () {
                _this.removeAnimationClass();
                _this.goToIndex(_this.currentIndex(_this.data.length - 1));
            }, this.options.animation.animationTime + 10);
        }
        else if (this.data.length - 1 < this.currentIndex()) {
            this.currentIndex(0);
            setTimeout(function () {
                _this.removeAnimationClass();
                _this.goToIndex(_this.currentIndex(0));
            }, this.options.animation.animationTime + 10);
        }
        return;
    };
    NgxCarouselComponent.prototype.scrollToIndex = function (number) {
        this.addAnimationClass();
        this.goToIndex(number);
    };
    NgxCarouselComponent.prototype.infiniteMode = function () {
        return this.options.infinite;
    };
    NgxCarouselComponent.prototype.autoplayMode = function () {
        if (this.options.autoplay && this.options.autoplay.enabled) {
            return this.options.autoplay;
        }
        else {
            return false;
        }
    };
    NgxCarouselComponent.prototype.moveIndex = function (move) {
        return this.currentIndex() + move;
    };
    NgxCarouselComponent.prototype.init = function () {
        var _this = this;
        this.zone.runOutsideAngular(function () {
            if (_this.data.length > 1 && _this.sufficientSlides()) {
                var sliderManager = new Hammer.Manager(_this.elements().containerElement);
                sliderManager.add(new Hammer.Pan({ threshold: 0, pointers: 0 }));
                sliderManager.on('panleft panright panend pancancel', function (e) {
                    switch (e.type) {
                        case 'panleft':
                        case 'panright':
                            _this.pauseTimer();
                            if (!_this.grabbing) {
                                _this.removeAnimationClass();
                                _this.addPanningClass();
                            }
                            if (_this.options.drag.draggable) {
                                _this.panTo(-_this.current * _this.carouselItemWidthVar + 0 + e.deltaX);
                            }
                            break;
                        case 'pancancel':
                            _this.removePanningClass();
                            _this.addAnimationClass();
                            _this.goToIndex(_this.currentIndex());
                            break;
                        case 'panend':
                            // e.gesture.srcEvent.preventDefault()
                            _this.pauseTimer();
                            _this.removePanningClass();
                            _this.addAnimationClass();
                            var moved = _this.calculateMoved(e);
                            if (!_this.infiniteMode()) {
                                if (_this.outOfBound()) {
                                    _this.scrollBackToEdge();
                                    setTimeout(function () {
                                        _this.removeAnimationClass();
                                    }, _this.options.animation.animationTime);
                                    break;
                                }
                            }
                            if (_this.options.drag.draggable) {
                                if (_this.detectPanningLeft(e)) {
                                    _this.addAnimationClass();
                                    _this.goToIndex(_this.moveIndex(+moved));
                                    _this.infiniteHandler();
                                    setTimeout(function () {
                                        _this.removeAnimationClass();
                                    }, _this.options.animation.animationTime);
                                    break;
                                }
                                if (_this.detectPanningRight(e)) {
                                    _this.addAnimationClass();
                                    if (1.00000001 < _this.currentIndex() && _this.currentIndex() < 1.999999999999) {
                                        _this.goToIndex(Math.ceil(_this.moveIndex(-moved)));
                                    }
                                    else {
                                        _this.goToIndex(_this.moveIndex(-moved));
                                    }
                                    _this.infiniteHandler();
                                    setTimeout(function () {
                                        _this.removeAnimationClass();
                                    }, _this.options.animation.animationTime);
                                    break;
                                }
                            }
                            if (_this.options.swipe.swipeable) {
                                if (_this.detectSwipingLeft(e)) {
                                    _this.nextSlide();
                                    _this.infiniteHandler();
                                    if (!_this.infiniteMode()) {
                                        _this.addAnimationClass();
                                        if (0.00000001 < _this.currentIndex() && _this.currentIndex() < 0.999999999999) {
                                            _this.removeAnimationClass();
                                            _this.goToIndex(0);
                                        }
                                    }
                                    break;
                                }
                                if (_this.detectSwipingRight(e)) {
                                    _this.prevSlide();
                                    _this.infiniteHandler();
                                    if (!_this.infiniteMode()) {
                                        if (0.00000001 < _this.currentIndex() && _this.currentIndex() < 0.999999999999) {
                                            _this.addAnimationClass();
                                            _this.goToIndex(0);
                                            _this.removeAnimationClass();
                                        }
                                    }
                                    break;
                                }
                            }
                        // this.addAnimationClass()
                        // this.goToIndex(this.currentIndex())
                        // setTimeout(() => {
                        // 	this.removeAnimationClass()
                        // }, this.options.animation.animationTime)
                        // e.gesture.srcEvent.preventDefault()
                    }
                });
                return sliderManager;
            }
        });
    };
    NgxCarouselComponent.ctorParameters = function () { return [
        { type: Object, decorators: [{ type: Inject, args: [PLATFORM_ID,] }] },
        { type: Renderer2 },
        { type: NgZone },
        { type: ChangeDetectorRef }
    ]; };
    __decorate([
        ViewChild('sliderElement', { static: false }),
        __metadata("design:type", ElementRef)
    ], NgxCarouselComponent.prototype, "sliderElement", void 0);
    __decorate([
        ViewChild('prevElement', { static: false }),
        __metadata("design:type", ElementRef)
    ], NgxCarouselComponent.prototype, "btnPrevElement", void 0);
    __decorate([
        ViewChild('nextElement', { static: false }),
        __metadata("design:type", ElementRef)
    ], NgxCarouselComponent.prototype, "btnNextElement", void 0);
    __decorate([
        ViewChild('progressElement', { static: false }),
        __metadata("design:type", ElementRef)
    ], NgxCarouselComponent.prototype, "progressContainerElement", void 0);
    __decorate([
        ContentChildren(NgxCarouselItemDirective, { read: ElementRef, descendants: true }),
        __metadata("design:type", QueryList)
    ], NgxCarouselComponent.prototype, "carouselItems", void 0);
    __decorate([
        ContentChild('carouselPrev', { static: false }),
        __metadata("design:type", TemplateRef)
    ], NgxCarouselComponent.prototype, "contentPrev", void 0);
    __decorate([
        ContentChild('carouselNext', { static: false }),
        __metadata("design:type", TemplateRef)
    ], NgxCarouselComponent.prototype, "contentNext", void 0);
    __decorate([
        ContentChild('carouselDot', { static: false }),
        __metadata("design:type", TemplateRef)
    ], NgxCarouselComponent.prototype, "dotElm", void 0);
    __decorate([
        ContentChild('carouselProgress', { static: false }),
        __metadata("design:type", TemplateRef)
    ], NgxCarouselComponent.prototype, "progressElm", void 0);
    __decorate([
        ContentChild('infiniteContainer', { static: false, read: ViewContainerRef }),
        __metadata("design:type", ViewContainerRef)
    ], NgxCarouselComponent.prototype, "infiniteContainer", void 0);
    __decorate([
        ContentChild('carouselContent', { static: false }),
        __metadata("design:type", TemplateRef)
    ], NgxCarouselComponent.prototype, "contentContent", void 0);
    __decorate([
        Input(),
        __metadata("design:type", Number)
    ], NgxCarouselComponent.prototype, "current", void 0);
    __decorate([
        Output(),
        __metadata("design:type", EventEmitter)
    ], NgxCarouselComponent.prototype, "currentChange", void 0);
    __decorate([
        Input(),
        __metadata("design:type", Array)
    ], NgxCarouselComponent.prototype, "data", void 0);
    __decorate([
        Input(),
        __metadata("design:type", ngxLightOptions)
    ], NgxCarouselComponent.prototype, "options", void 0);
    __decorate([
        HostListener('window:resize'),
        __metadata("design:type", Function),
        __metadata("design:paramtypes", []),
        __metadata("design:returntype", void 0)
    ], NgxCarouselComponent.prototype, "onResize", null);
    __decorate([
        HostListener('mouseover'),
        __metadata("design:type", Function),
        __metadata("design:paramtypes", []),
        __metadata("design:returntype", void 0)
    ], NgxCarouselComponent.prototype, "hover", null);
    __decorate([
        HostListener('mouseout'),
        __metadata("design:type", Function),
        __metadata("design:paramtypes", []),
        __metadata("design:returntype", void 0)
    ], NgxCarouselComponent.prototype, "unhover", null);
    NgxCarouselComponent = __decorate([
        Component({
            selector: 'ngx-light-carousel',
            template: "<div #sliderElement class=\"carousel\">\n\t<!-- Carousel Content -->\n\t<ng-content class=\"content\" select=\"[ngx-light-carousel-container]\"> </ng-content>\n</div>\n<!-- Previous Slide -->\n<div *ngIf=\"options.arrows\" #prevElement (click)=\"prevSlide()\" class=\"direction left\">\n\t<ng-container *ngTemplateOutlet=\"contentPrev\"></ng-container>\n</div>\n<!-- Next Slide -->\n<div *ngIf=\"options.arrows\" #nextElement (click)=\"nextSlide()\" class=\"direction right\">\n\t<ng-container *ngTemplateOutlet=\"contentNext\"></ng-container>\n</div>\n<!-- Dots -->\n<div *ngIf=\"options.indicators\" class=\"indicators\">\n\t<li *ngFor=\"let dot of dots; let i = index\" (click)=\"scrollToIndex(i)\" [ngClass]=\"{ active: current == i }\">\n\t\t<div class=\"ball\"></div>\n\t\t<ng-container *ngTemplateOutlet=\"dotElm\"> </ng-container>\n\t</li>\n</div>\n<!-- Progress -->\n<div *ngIf=\"progressElm && options.autoplay\" #progressElement>\n\t<ng-container *ngTemplateOutlet=\"progressElm\"> </ng-container>\n</div>\n<!-- Mask -->\n<div class=\"mask\">\n\t<ng-container></ng-container>\n</div>\n",
            encapsulation: ViewEncapsulation.None,
            styles: [".transition *{transition:transform .2s ease-out!important}:host{position:relative}.wrapper{padding-bottom:20px;position:relative;overflow-x:hidden;overflow-y:auto}.panning img{pointer-events:none}.carousel{overflow-x:hidden;position:relative;width:100%;height:100%;padding-bottom:30px}.carousel .content{display:-ms-inline-flexbox;display:inline-flex}.content{-ms-touch-action:pan-y!important;touch-action:pan-y!important;-webkit-backface-visibility:hidden;backface-visibility:hidden;will-change:transform,opacity;transform:translate3d();-ms-perspective:1000;perspective:1000;transform:translateZ(0)}.content article{width:100%;display:block}.content article img{width:100%;display:block;background-size:cover;background-position:center}.slide{will-change:transform,opacity;transform:translate3d();-webkit-backface-visibility:hidden;backface-visibility:hidden;-webkit-perspective:1000;-moz-perspective:1000;-ms-perspective:1000;transform:translateZ(0);perspective:1000}.direction{background-repeat:no-repeat;width:5%;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none;position:absolute;height:100%;cursor:pointer;background-size:50%;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;top:0;background-position:center center}.direction.left{left:0;background-image:url(\"data:image/svg+xml,%3Csvg%20version%3D%221.1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20style%3D%22transform%3A%20scale(-1%2C1)%22%20viewBox%3D%220%200%201000%201000%22%20enable-background%3D%22new%200%200%201000%201000%22%20xml%3Aspace%3D%22preserve%22%3E%0A%3Cmetadata%3E%20Svg%20Vector%20Icons%20%3A%20http%3A%2F%2Fwww.onlinewebfonts.com%2Ficon%20%3C%2Fmetadata%3E%0A%3Cg%3E%3Cpath%20d%3D%22M767.9%2C499.9L291.6%2C10l-59.4%2C61.3l416.6%2C428.7L232.1%2C928.7l59.5%2C61.3L767.9%2C499.9z%22%2F%3E%3C%2Fg%3E%0A%3C%2Fsvg%3E\")}.direction.right{right:0;background-image:url(data:image/svg+xml,%3Csvg%20version%3D%221.1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20viewBox%3D%220%200%201000%201000%22%20enable-background%3D%22new%200%200%201000%201000%22%20xml%3Aspace%3D%22preserve%22%3E%0A%3Cmetadata%3E%20Svg%20Vector%20Icons%20%3A%20http%3A%2F%2Fwww.onlinewebfonts.com%2Ficon%20%3C%2Fmetadata%3E%0A%3Cg%3E%3Cpath%20d%3D%22M767.9%2C499.9L291.6%2C10l-59.4%2C61.3l416.6%2C428.7L232.1%2C928.7l59.5%2C61.3L767.9%2C499.9z%22%2F%3E%3C%2Fg%3E%0A%3C%2Fsvg%3E)}ul.indicators{bottom:0;left:0;margin:0;padding:0;position:absolute;text-align:center;width:100%}ul.indicators li{cursor:pointer;display:inline-block;position:relative;padding:.5rem}ul.indicators li.active *{color:#000}.active .ball{background:#000;color:#000;opacity:1}.ball{width:10px;height:10px;border-radius:50%;background:#fff;border:2px solid #000}.grab{cursor:-webkit-grab;cursor:grab}.grabbing{cursor:-webkit-grabbing;cursor:grabbing}.mask{pointer-events:none;position:absolute;left:0;top:0;right:0;bottom:0}"]
        }),
        __param(0, Inject(PLATFORM_ID)),
        __metadata("design:paramtypes", [Object, Renderer2, NgZone, ChangeDetectorRef])
    ], NgxCarouselComponent);
    return NgxCarouselComponent;
}());
export { NgxCarouselComponent };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibmd4LWxpZ2h0LWNhcm91c2VsLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL25neC1saWdodC1jYXJvdXNlbC8iLCJzb3VyY2VzIjpbImxpYi9uZ3gtbGlnaHQtY2Fyb3VzZWwuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQSxPQUFPLEVBQUUsaUJBQWlCLEVBQUUsTUFBTSxpQkFBaUIsQ0FBQTtBQUNuRCxPQUFPLEVBQ04sYUFBYSxFQUNiLGlCQUFpQixFQUNqQixTQUFTLEVBQ1QsWUFBWSxFQUNaLGVBQWUsRUFDZixVQUFVLEVBQ1YsZUFBZSxFQUNmLFlBQVksRUFDWixZQUFZLEVBQ1osTUFBTSxFQUNOLEtBQUssRUFDTCxNQUFNLEVBQ04sU0FBUyxFQUNULFNBQVMsRUFDVCxNQUFNLEVBQ04sTUFBTSxFQUNOLFdBQVcsRUFDWCxTQUFTLEVBQ1QsU0FBUyxFQUNULFdBQVcsRUFDWCxTQUFTLEVBQ1QsZ0JBQWdCLEVBQ2hCLGlCQUFpQixHQUNqQixNQUFNLGVBQWUsQ0FBQTtBQUN0QixPQUFPLEtBQUssTUFBTSxNQUFNLFVBQVUsQ0FBQTtBQUNsQyxPQUFPLEVBQUUsUUFBUSxFQUFjLE9BQU8sRUFBZ0IsTUFBTSxNQUFNLENBQUE7QUFDbEUsT0FBTyxFQUFFLFFBQVEsRUFBRSxNQUFNLGdCQUFnQixDQUFBO0FBQ3pDLE9BQU8sRUFBRSx3QkFBd0IsRUFBRSxNQUFNLHFDQUFxQyxDQUFBO0FBQzlFLE9BQU8sRUFBb0IsZUFBZSxFQUFFLE1BQU0sNEJBQTRCLENBQUE7QUFROUU7SUE0QkMsOEJBQXlDLFVBQWtCLEVBQVUsU0FBb0IsRUFBVSxJQUFZLEVBQVUsRUFBcUI7UUFBOUksaUJBT0M7UUFQd0MsZUFBVSxHQUFWLFVBQVUsQ0FBUTtRQUFVLGNBQVMsR0FBVCxTQUFTLENBQVc7UUFBVSxTQUFJLEdBQUosSUFBSSxDQUFRO1FBQVUsT0FBRSxHQUFGLEVBQUUsQ0FBbUI7UUFoQnJJLFlBQU8sR0FBVyxDQUFDLENBQUE7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QUFDO2tDQUFpQixXQUFXO2dFQUFLO0lBQzNFO1FBQVIsS0FBSyxFQUFFOzt5REFBb0I7SUFDbEI7UUFBVCxNQUFNLEVBQUU7a0NBQWdCLFlBQVk7K0RBQTZCO0lBQ3pEO1FBQVIsS0FBSyxFQUFFOztzREFBWTtJQUNYO1FBQVIsS0FBSyxFQUFFO2tDQUFVLGVBQWU7eURBQUE7SUEyRGpDO1FBREMsWUFBWSxDQUFDLGVBQWUsQ0FBQzs7Ozt3REFXN0I7SUEyREQ7UUFEQyxZQUFZLENBQUMsV0FBVyxDQUFDOzs7O3FEQU96QjtJQUdEO1FBREMsWUFBWSxDQUFDLFVBQVUsQ0FBQzs7Ozt1REFNeEI7SUE3Slcsb0JBQW9CO1FBTmhDLFNBQVMsQ0FBQztZQUNWLFFBQVEsRUFBRSxvQkFBb0I7WUFDOUIsb2xDQUFrRDtZQUVsRCxhQUFhLEVBQUUsaUJBQWlCLENBQUMsSUFBSTs7U0FDckMsQ0FBQztRQTZCWSxXQUFBLE1BQU0sQ0FBQyxXQUFXLENBQUMsQ0FBQTt5Q0FBcUIsTUFBTSxFQUFxQixTQUFTLEVBQWdCLE1BQU0sRUFBYyxpQkFBaUI7T0E1QmxJLG9CQUFvQixDQXNpQmhDO0lBQUQsMkJBQUM7Q0FBQSxBQXRpQkQsSUFzaUJDO1NBdGlCWSxvQkFBb0IiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBpc1BsYXRmb3JtQnJvd3NlciB9IGZyb20gJ0Bhbmd1bGFyL2NvbW1vbidcbmltcG9ydCB7XG5cdEFmdGVyVmlld0luaXQsXG5cdENoYW5nZURldGVjdG9yUmVmLFxuXHRDb21wb25lbnQsXG5cdENvbnRlbnRDaGlsZCxcblx0Q29udGVudENoaWxkcmVuLFxuXHRFbGVtZW50UmVmLFxuXHRFbWJlZGRlZFZpZXdSZWYsXG5cdEV2ZW50RW1pdHRlcixcblx0SG9zdExpc3RlbmVyLFxuXHRJbmplY3QsXG5cdElucHV0LFxuXHROZ1pvbmUsXG5cdE9uQ2hhbmdlcyxcblx0T25EZXN0cm95LFxuXHRPbkluaXQsXG5cdE91dHB1dCxcblx0UExBVEZPUk1fSUQsXG5cdFF1ZXJ5TGlzdCxcblx0UmVuZGVyZXIyLFxuXHRUZW1wbGF0ZVJlZixcblx0Vmlld0NoaWxkLFxuXHRWaWV3Q29udGFpbmVyUmVmLFxuXHRWaWV3RW5jYXBzdWxhdGlvbixcbn0gZnJvbSAnQGFuZ3VsYXIvY29yZSdcbmltcG9ydCAqIGFzIEhhbW1lciBmcm9tICdoYW1tZXJqcydcbmltcG9ydCB7IGludGVydmFsLCBPYnNlcnZhYmxlLCBTdWJqZWN0LCBTdWJzY3JpcHRpb24gfSBmcm9tICdyeGpzJ1xuaW1wb3J0IHsgdGhyb3R0bGUgfSBmcm9tICdyeGpzL29wZXJhdG9ycydcbmltcG9ydCB7IE5neENhcm91c2VsSXRlbURpcmVjdGl2ZSB9IGZyb20gJy4vbmd4LWxpZ2h0LWNhcm91c2VsLWl0ZW0uZGlyZWN0aXZlJ1xuaW1wb3J0IHsgbmd4TGlnaHRBdXRvcGxheSwgbmd4TGlnaHRPcHRpb25zIH0gZnJvbSAnLi9uZ3gtbGlnaHQtY2Fyb3VzZWwubW9kZWwnXG5cbkBDb21wb25lbnQoe1xuXHRzZWxlY3RvcjogJ25neC1saWdodC1jYXJvdXNlbCcsXG5cdHRlbXBsYXRlVXJsOiAnLi9uZ3gtbGlnaHQtY2Fyb3VzZWwuY29tcG9uZW50Lmh0bWwnLFxuXHRzdHlsZVVybHM6IFsnLi9uZ3gtbGlnaHQtY2Fyb3VzZWwuY29tcG9uZW50LnNjc3MnXSxcblx0ZW5jYXBzdWxhdGlvbjogVmlld0VuY2Fwc3VsYXRpb24uTm9uZSxcbn0pXG5leHBvcnQgY2xhc3MgTmd4Q2Fyb3VzZWxDb21wb25lbnQgaW1wbGVtZW50cyBBZnRlclZpZXdJbml0LCBPbkNoYW5nZXMsIE9uSW5pdCwgT25EZXN0cm95IHtcblx0QFZpZXdDaGlsZCgnc2xpZGVyRWxlbWVudCcsIHsgc3RhdGljOiBmYWxzZSB9KSBzbGlkZXJFbGVtZW50OiBFbGVtZW50UmVmXG5cdEBWaWV3Q2hpbGQoJ3ByZXZFbGVtZW50JywgeyBzdGF0aWM6IGZhbHNlIH0pIGJ0blByZXZFbGVtZW50OiBFbGVtZW50UmVmXG5cdEBWaWV3Q2hpbGQoJ25leHRFbGVtZW50JywgeyBzdGF0aWM6IGZhbHNlIH0pIGJ0bk5leHRFbGVtZW50OiBFbGVtZW50UmVmXG5cdEBWaWV3Q2hpbGQoJ3Byb2dyZXNzRWxlbWVudCcsIHsgc3RhdGljOiBmYWxzZSB9KSBwcm9ncmVzc0NvbnRhaW5lckVsZW1lbnQ6IEVsZW1lbnRSZWZcblx0QENvbnRlbnRDaGlsZHJlbihOZ3hDYXJvdXNlbEl0ZW1EaXJlY3RpdmUsIHsgcmVhZDogRWxlbWVudFJlZiwgZGVzY2VuZGFudHM6IHRydWUgfSkgY2Fyb3VzZWxJdGVtczogUXVlcnlMaXN0PEVsZW1lbnRSZWY+XG5cdEBDb250ZW50Q2hpbGQoJ2Nhcm91c2VsUHJldicsIHsgc3RhdGljOiBmYWxzZSB9KSBjb250ZW50UHJldjogVGVtcGxhdGVSZWY8YW55PlxuXHRAQ29udGVudENoaWxkKCdjYXJvdXNlbE5leHQnLCB7IHN0YXRpYzogZmFsc2UgfSkgY29udGVudE5leHQ6IFRlbXBsYXRlUmVmPGFueT5cblx0QENvbnRlbnRDaGlsZCgnY2Fyb3VzZWxEb3QnLCB7IHN0YXRpYzogZmFsc2UgfSkgZG90RWxtOiBUZW1wbGF0ZVJlZjxhbnk+XG5cdEBDb250ZW50Q2hpbGQoJ2Nhcm91c2VsUHJvZ3Jlc3MnLCB7IHN0YXRpYzogZmFsc2UgfSkgcHJvZ3Jlc3NFbG06IFRlbXBsYXRlUmVmPGFueT5cblx0QENvbnRlbnRDaGlsZCgnaW5maW5pdGVDb250YWluZXInLCB7IHN0YXRpYzogZmFsc2UsIHJlYWQ6IFZpZXdDb250YWluZXJSZWYgfSkgaW5maW5pdGVDb250YWluZXI6IFZpZXdDb250YWluZXJSZWZcblx0QENvbnRlbnRDaGlsZCgnY2Fyb3VzZWxDb250ZW50JywgeyBzdGF0aWM6IGZhbHNlIH0pIGNvbnRlbnRDb250ZW50OiBUZW1wbGF0ZVJlZjxhbnk+XG5cdEBJbnB1dCgpIGN1cnJlbnQ6IG51bWJlciA9IDBcblx0QE91dHB1dCgpIGN1cnJlbnRDaGFuZ2U6IEV2ZW50RW1pdHRlcjxudW1iZXI+ID0gbmV3IEV2ZW50RW1pdHRlcigpXG5cdEBJbnB1dCgpIGRhdGE6IGFueVtdXG5cdEBJbnB1dCgpIG9wdGlvbnM6IG5neExpZ2h0T3B0aW9uc1xuXHRwcml2YXRlIGluZmluaXRlRWxtUmVmczogQXJyYXk8RW1iZWRkZWRWaWV3UmVmPGFueT4+ID0gW11cblx0cHJpdmF0ZSB0aW1lTGVmdDogbnVtYmVyID0gMjAwMFxuXHRwcml2YXRlIGludGVydmFsXG5cdHByaXZhdGUgYWN0aW9uRGVsYXk6IFN1YmplY3Q8YW55PlxuXHRkb3RzOiBudW1iZXJbXVxuXHRkb3RzTG9hZGluZzogYm9vbGVhbiA9IHRydWVcblx0bG9hZGluZzogYm9vbGVhbiA9IHRydWVcblx0Z3JhYmJpbmc6IGJvb2xlYW4gPSBmYWxzZVxuXHR0aHJvdHRsZVN1YjogT2JzZXJ2YWJsZTxhbnk+XG5cdHN1YlJlZjogU3Vic2NyaXB0aW9uXG5cdGFycm93c1Zpc2libGU6IGJvb2xlYW4gPSB0cnVlXG5cdGNhcm91c2VsSXRlbVdpZHRoVmFyOiBudW1iZXJcblx0Y29uc3RydWN0b3IoQEluamVjdChQTEFURk9STV9JRCkgcHJpdmF0ZSBwbGF0Zm9ybUlkOiBPYmplY3QsIHByaXZhdGUgX3JlbmRlcmVyOiBSZW5kZXJlcjIsIHByaXZhdGUgem9uZTogTmdab25lLCBwcml2YXRlIGNkOiBDaGFuZ2VEZXRlY3RvclJlZikge1xuXHRcdHRoaXMubG9hZGluZyA9IHRydWVcblx0XHR0aGlzLmFjdGlvbkRlbGF5ID0gbmV3IFN1YmplY3Q8YW55PigpXG5cdFx0dGhpcy50aHJvdHRsZVN1YiA9IHRoaXMuYWN0aW9uRGVsYXkuYXNPYnNlcnZhYmxlKClcblx0XHR0aGlzLnN1YlJlZiA9IHRoaXMudGhyb3R0bGVTdWIucGlwZSh0aHJvdHRsZSh2YWwgPT4gaW50ZXJ2YWwodGhpcy5vcHRpb25zLmFuaW1hdGlvbi5hbmltYXRpb25UaW1lICsgNDApKSkuc3Vic2NyaWJlKGRhdGEgPT4ge1xuXHRcdFx0ZGF0YSgpXG5cdFx0fSlcblx0fVxuXG5cdGNsaWNrKGZuKSB7XG5cdFx0dGhpcy5hY3Rpb25EZWxheS5uZXh0KGZuKVxuXHR9XG5cblx0bmdPbkluaXQoKSB7XG5cdFx0dGhpcy5kb3RzID0gW11cblx0fVxuXG5cdG5nQWZ0ZXJWaWV3SW5pdCgpIHtcblx0XHR0aGlzLmluaXQoKVxuXHRcdHRoaXMubG9hZGluZyA9IGZhbHNlXG5cdFx0aWYgKHRoaXMuc3VmZmljaWVudFNsaWRlcygpKSB7XG5cdFx0XHRpZiAodGhpcy5pbmZpbml0ZU1vZGUoKSkge1xuXHRcdFx0XHR0aGlzLmFkZEluZmluaXRlRWxtKClcblx0XHRcdH1cblx0XHRcdGlmICh0aGlzLmF1dG9wbGF5TW9kZSgpKSB7XG5cdFx0XHRcdHRoaXMuc3RhcnRUaW1lcigpXG5cdFx0XHR9XG5cdFx0fVxuXHRcdHRoaXMuZ29Ub0luZGV4KHRoaXMuY3VycmVudClcblx0XHR0aGlzLnJvb3RFbG1XaWR0aFxuXHRcdHRoaXMuc2V0Vmlld1dpZHRoKClcblx0XHR0aGlzLmNhbGN1bGF0ZURvdHMoKVxuXHR9XG5cblx0bmdPbkNoYW5nZXMoKSB7XG5cdFx0aWYgKHRoaXMuZWxlbWVudHMoKSkge1xuXHRcdFx0dGhpcy5vblJlc2l6ZSgpXG5cdFx0fVxuXHR9XG5cblx0bmdPbkRlc3Ryb3koKSB7XG5cdFx0dGhpcy5wYXVzZVRpbWVyKClcblx0XHR0aGlzLnN1YlJlZi51bnN1YnNjcmliZSgpXG5cdH1cblxuXHRASG9zdExpc3RlbmVyKCd3aW5kb3c6cmVzaXplJylcblx0b25SZXNpemUoKSB7XG5cdFx0dGhpcy5yb290RWxtV2lkdGhcblx0XHR0aGlzLnNldFZpZXdXaWR0aCgpXG5cdFx0dGhpcy5jYWxjdWxhdGVEb3RzKClcblx0XHRpZiAodGhpcy5zdWZmaWNpZW50U2xpZGVzKCkpIHtcblx0XHRcdGlmICh0aGlzLmluZmluaXRlTW9kZSgpKSB7XG5cdFx0XHRcdHRoaXMuYWRkSW5maW5pdGVFbG0oKVxuXHRcdFx0fVxuXHRcdH1cblx0XHR0aGlzLmdvVG9JbmRleCh0aGlzLmN1cnJlbnRJbmRleCgpKVxuXHR9XG5cblx0c3VmZmljaWVudFNsaWRlcygpIHtcblx0XHR0aGlzLnNob3dBcnJvd3ModGhpcy5kYXRhLmxlbmd0aCA+IHRoaXMuY3VycmVudEJyZWFrcG9pbnQoKS5udW1iZXIpXG5cdFx0cmV0dXJuIHRoaXMuZGF0YS5sZW5ndGggPiB0aGlzLmN1cnJlbnRCcmVha3BvaW50KCkubnVtYmVyXG5cdH1cblxuXHRzaG93QXJyb3dzKHN0YXRlOiBib29sZWFuKSB7XG5cdFx0dGhpcy5hcnJvd3NWaXNpYmxlID0gc3RhdGVcblx0fVxuXG5cdHJvb3RFbG1XaWR0aCgpIHtcblx0XHRyZXR1cm4gaXNQbGF0Zm9ybUJyb3dzZXIodGhpcy5wbGF0Zm9ybUlkKSA/IHRoaXMuZWxlbWVudHMoKS5yb290RWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS53aWR0aCA6IDEwMFxuXHR9XG5cblx0Y2Fyb3VzZWxJdGVtV2lkdGgoKSB7XG5cdFx0aWYgKHRoaXMuZGF0YS5sZW5ndGggPiB0aGlzLmN1cnJlbnRCcmVha3BvaW50KCkubnVtYmVyKSB7XG5cdFx0XHRyZXR1cm4gKHRoaXMuY2Fyb3VzZWxJdGVtV2lkdGhWYXIgPSB0aGlzLnJvb3RFbG1XaWR0aCgpIC8gdGhpcy5jdXJyZW50QnJlYWtwb2ludCgpLm51bWJlcilcblx0XHR9IGVsc2Uge1xuXHRcdFx0cmV0dXJuICh0aGlzLmNhcm91c2VsSXRlbVdpZHRoVmFyID0gdGhpcy5yb290RWxtV2lkdGgoKSAvIHRoaXMuZGF0YS5sZW5ndGgpXG5cdFx0fVxuXHR9XG5cblx0Y3VycmVudEJyZWFrcG9pbnQoKSB7XG5cdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLm9wdGlvbnMuYnJlYWtwb2ludHMubGVuZ3RoOyBpKyspIHtcblx0XHRcdGlmICh0aGlzLm9wdGlvbnMuYnJlYWtwb2ludHNbaV0ud2lkdGggPiB0aGlzLnJvb3RFbG1XaWR0aCgpKSB7XG5cdFx0XHRcdHJldHVybiB0aGlzLm9wdGlvbnMuYnJlYWtwb2ludHNbaV1cblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHRlbGVtZW50cygpIHtcblx0XHRpZiAodGhpcy5zbGlkZXJFbGVtZW50KSB7XG5cdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRyb290RWxlbWVudDogdGhpcy5zbGlkZXJFbGVtZW50Lm5hdGl2ZUVsZW1lbnQsXG5cdFx0XHRcdGNvbnRhaW5lckVsZW1lbnQ6IHRoaXMuc2xpZGVyRWxlbWVudC5uYXRpdmVFbGVtZW50LmNoaWxkcmVuWzBdIGFzIEhUTUxFbGVtZW50LFxuXHRcdFx0XHRjYXJvdXNlbEl0ZW1zOiB0aGlzLmNhcm91c2VsSXRlbXMudG9BcnJheSgpLm1hcCh4ID0+IHgubmF0aXZlRWxlbWVudCksXG5cdFx0XHR9XG5cdFx0fVxuXHRcdHJldHVyblxuXHR9XG5cblx0cHJpdmF0ZSBzZXRWaWV3V2lkdGgoKSB7XG5cdFx0dGhpcy5fcmVuZGVyZXIuc2V0U3R5bGUodGhpcy5lbGVtZW50cygpLmNvbnRhaW5lckVsZW1lbnQsICdkaXNwbGF5JywgJ2lubGluZS1mbGV4Jylcblx0XHR0aGlzLl9yZW5kZXJlci5zZXRTdHlsZSh0aGlzLmVsZW1lbnRzKCkuY29udGFpbmVyRWxlbWVudCwgJ3Bvc2l0aW9uJywgJ3JlbGF0aXZlJylcblx0XHR0aGlzLmVsZW1lbnRzKCkuY2Fyb3VzZWxJdGVtcy5mb3JFYWNoKChlbGVtZW50OiBIVE1MRWxlbWVudCkgPT4ge1xuXHRcdFx0dGhpcy5fcmVuZGVyZXIuYWRkQ2xhc3MoZWxlbWVudCwgJ3NsaWRlJylcblx0XHRcdHRoaXMuX3JlbmRlcmVyLnNldFN0eWxlKGVsZW1lbnQsICd3aWR0aCcsIHRoaXMuY2Fyb3VzZWxJdGVtV2lkdGgoKSArICdweCcpXG5cdFx0XHR0aGlzLl9yZW5kZXJlci5zZXRTdHlsZShlbGVtZW50LCAnZGlzcGxheScsICdpbmxpbmUtZmxleCcpXG5cdFx0fSlcblx0XHRpZiAodGhpcy5pbmZpbml0ZU1vZGUoKSkge1xuXHRcdFx0dGhpcy5pbmZpbml0ZUVsbVJlZnMuZm9yRWFjaChyZWYgPT4ge1xuXHRcdFx0XHR0aGlzLl9yZW5kZXJlci5hZGRDbGFzcyhyZWYucm9vdE5vZGVzWzBdLCAnc2xpZGUnKVxuXHRcdFx0XHR0aGlzLl9yZW5kZXJlci5zZXRTdHlsZShyZWYucm9vdE5vZGVzWzBdLCAnd2lkdGgnLCB0aGlzLmNhcm91c2VsSXRlbVdpZHRoKCkgKyAncHgnKVxuXHRcdFx0fSlcblx0XHR9XG5cdH1cblxuXHRASG9zdExpc3RlbmVyKCdtb3VzZW92ZXInKVxuXHRob3ZlcigpIHtcblx0XHRpZiAodGhpcy5hdXRvcGxheU1vZGUoKSkge1xuXHRcdFx0aWYgKCh0aGlzLmF1dG9wbGF5TW9kZSgpIGFzIGFueSkuc3RvcE9uSG92ZXIpIHtcblx0XHRcdFx0dGhpcy5wYXVzZVRpbWVyKClcblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHRASG9zdExpc3RlbmVyKCdtb3VzZW91dCcpXG5cdHVuaG92ZXIoKSB7XG5cdFx0aWYgKHRoaXMuYXV0b3BsYXlNb2RlKCkpIHtcblx0XHRcdHRoaXMucGF1c2VUaW1lcigpXG5cdFx0XHR0aGlzLnN0YXJ0VGltZXIoKVxuXHRcdH1cblx0fVxuXG5cdHByaXZhdGUgY2FsY3VsYXRlRG90cygpIHtcblx0XHR0aGlzLmRvdHMgPSBbXVxuXHRcdGlmICh0aGlzLmluZmluaXRlTW9kZSgpKSB7XG5cdFx0XHR2YXIgbnVtYmVyID0gdGhpcy5kYXRhLmxlbmd0aFxuXHRcdH0gZWxzZSB7XG5cdFx0XHR2YXIgbnVtYmVyID0gdGhpcy5kYXRhLmxlbmd0aCAtIHRoaXMuY3VycmVudEJyZWFrcG9pbnQoKS5udW1iZXIgKyAxXG5cdFx0fVxuXHRcdGlmIChudW1iZXIgPiAxKSB7XG5cdFx0XHRsZXQgcmVzdWx0cyA9IEFycmF5LmZyb20oQXJyYXkoTnVtYmVyKG51bWJlci50b0ZpeGVkKDApKSkua2V5cygpKVxuXHRcdFx0dGhpcy5kb3RzID0gcmVzdWx0c1xuXHRcdFx0dGhpcy5kb3RzTG9hZGluZyA9IGZhbHNlXG5cdFx0XHRyZXR1cm4gcmVzdWx0c1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRsZXQgcmVzdWx0cyA9IFtdXG5cdFx0XHR0aGlzLmRvdHMgPSBbXVxuXHRcdFx0dGhpcy5kb3RzTG9hZGluZyA9IGZhbHNlXG5cdFx0XHRyZXR1cm4gcmVzdWx0c1xuXHRcdH1cblx0fVxuXG5cdGFkZFBhbm5pbmdDbGFzcyA9ICgpID0+IHtcblx0XHR0aGlzLmdyYWJiaW5nID0gdHJ1ZVxuXHRcdHRoaXMuX3JlbmRlcmVyLmFkZENsYXNzKHRoaXMuZWxlbWVudHMoKS5yb290RWxlbWVudCwgJ2dyYWJiaW5nJylcblx0XHR0aGlzLl9yZW5kZXJlci5hZGRDbGFzcyh0aGlzLmVsZW1lbnRzKCkuY29udGFpbmVyRWxlbWVudCwgJ3Bhbm5pbmcnKVxuXHR9XG5cblx0cmVtb3ZlUGFubmluZ0NsYXNzID0gKCkgPT4ge1xuXHRcdHRoaXMuZ3JhYmJpbmcgPSBmYWxzZVxuXHRcdHRoaXMuX3JlbmRlcmVyLnJlbW92ZUNsYXNzKHRoaXMuZWxlbWVudHMoKS5yb290RWxlbWVudCwgJ2dyYWJiaW5nJylcblx0XHR0aGlzLl9yZW5kZXJlci5yZW1vdmVDbGFzcyh0aGlzLmVsZW1lbnRzKCkuY29udGFpbmVyRWxlbWVudCwgJ3Bhbm5pbmcnKVxuXHR9XG5cblx0YWRkQW5pbWF0aW9uQ2xhc3MgPSAoKSA9PiB7XG5cdFx0aWYgKHRoaXMub3B0aW9ucy5hbmltYXRpb24uYW5pbWF0aW9uQ2xhc3MgIT09ICcnKSB7XG5cdFx0XHR0aGlzLl9yZW5kZXJlci5hZGRDbGFzcyh0aGlzLmVsZW1lbnRzKCkuY29udGFpbmVyRWxlbWVudCwgdGhpcy5vcHRpb25zLmFuaW1hdGlvbi5hbmltYXRpb25DbGFzcylcblx0XHR9XG5cdH1cblxuXHRyZW1vdmVBbmltYXRpb25DbGFzcyA9ICgpID0+IHtcblx0XHRpZiAodGhpcy5vcHRpb25zLmFuaW1hdGlvbi5hbmltYXRpb25DbGFzcyAhPT0gJycpIHtcblx0XHRcdHRoaXMuX3JlbmRlcmVyLnJlbW92ZUNsYXNzKHRoaXMuZWxlbWVudHMoKS5jb250YWluZXJFbGVtZW50LCB0aGlzLm9wdGlvbnMuYW5pbWF0aW9uLmFuaW1hdGlvbkNsYXNzKVxuXHRcdH1cblx0fVxuXG5cdHBhblRvID0gKHZhbHVlOiBudW1iZXIpID0+IHtcblx0XHRpZiAoaXNQbGF0Zm9ybUJyb3dzZXIodGhpcy5wbGF0Zm9ybUlkKSkge1xuXHRcdFx0dGhpcy5fcmVuZGVyZXIuc2V0U3R5bGUodGhpcy5lbGVtZW50cygpLmNvbnRhaW5lckVsZW1lbnQsICd0cmFuc2Zvcm0nLCBgdHJhbnNsYXRlM2QoJHt2YWx1ZX1weCwgMCwwKWApXG5cdFx0fSBlbHNlIHtcblx0XHRcdHRoaXMuX3JlbmRlcmVyLnNldFN0eWxlKHRoaXMuZWxlbWVudHMoKS5jb250YWluZXJFbGVtZW50LCAndHJhbnNmb3JtJywgYHRyYW5zbGF0ZTNkKCR7dmFsdWV9JSwgMCwwKWApXG5cdFx0fVxuXHR9XG5cblx0Y3VycmVudEluZGV4ID0gKG51bWJlcj86IG51bWJlcikgPT4ge1xuXHRcdGlmICghdGhpcy5pbmZpbml0ZU1vZGUoKSAmJiBudW1iZXIgIT09IHVuZGVmaW5lZCkge1xuXHRcdFx0aWYgKG51bWJlciA+PSAwKSB7XG5cdFx0XHRcdGlmIChudW1iZXIgPCAwKSB7XG5cdFx0XHRcdFx0dGhpcy5jdXJyZW50ID0gMFxuXHRcdFx0XHRcdC8vIH0gZWxzZSBpZiAodGhpcy5jdXJyZW50QnJlYWtwb2ludCgpLm51bWJlciAlIDEgIT0gMCAmJiB0aGlzLmN1cnJlbnQgLSAxID4gdGhpcy5kYXRhLmxlbmd0aCkge1xuXHRcdFx0XHRcdC8vIFx0dGhpcy5jdXJyZW50ID0gdGhpcy5kYXRhLmxlbmd0aCArIDEgLSB0aGlzLmN1cnJlbnRCcmVha3BvaW50KCkubnVtYmVyXG5cdFx0XHRcdH0gZWxzZSBpZiAobnVtYmVyID4gdGhpcy5kYXRhLmxlbmd0aCAtIHRoaXMuY3VycmVudEJyZWFrcG9pbnQoKS5udW1iZXIpIHtcblx0XHRcdFx0XHR0aGlzLmN1cnJlbnQgPSB0aGlzLmRhdGEubGVuZ3RoIC0gdGhpcy5jdXJyZW50QnJlYWtwb2ludCgpLm51bWJlclxuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdHRoaXMuY3VycmVudCA9IG51bWJlclxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fSBlbHNlIGlmIChudW1iZXIgIT0gdW5kZWZpbmVkKSB7XG5cdFx0XHR0aGlzLmN1cnJlbnQgPSBudW1iZXJcblx0XHR9XG5cdFx0cmV0dXJuIHRoaXMuY3VycmVudFxuXHR9XG5cblx0c2xvd09uT3V0T2ZCb3VuZHMgPSBlID0+IHtcblx0XHRpZiAoIXRoaXMub3B0aW9ucy5pbmZpbml0ZSAmJiB0aGlzLm91dE9mQm91bmQoKSkge1xuXHRcdFx0ZS5kZWx0YVggKj0gMC4yXG5cdFx0XHRlLmRlbHRhWSAqPSAwLjJcblx0XHR9XG5cdFx0cmV0dXJuIGVcblx0fVxuXG5cdHNjcm9sbEJhY2tUb0VkZ2UgPSAoKSA9PiB7XG5cdFx0Y29uc3Qgcm9vdCA9IHRoaXMuZWxlbWVudHMoKS5yb290RWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKVxuXHRcdGNvbnN0IGNvbnRhaW5lciA9IHRoaXMuZWxlbWVudHMoKS5jb250YWluZXJFbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpXG5cdFx0aWYgKGNvbnRhaW5lci5yaWdodCA8IHJvb3QucmlnaHQpIHtcblx0XHRcdHRoaXMuZ29Ub0luZGV4KHRoaXMudmlzaWJsZUVsZW1lbnRzKCkpXG5cdFx0fVxuXHRcdGlmIChyb290LmxlZnQgLSBjb250YWluZXIubGVmdCA8IDApIHtcblx0XHRcdHRoaXMuZ29Ub0luZGV4KDApXG5cdFx0fVxuXHR9XG5cblx0b3V0T2ZCb3VuZCA9ICgpID0+IHtcblx0XHRjb25zdCByb290ID0gdGhpcy5lbGVtZW50cygpLnJvb3RFbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpXG5cdFx0Y29uc3QgY29udGFpbmVyID0gdGhpcy5lbGVtZW50cygpLmNvbnRhaW5lckVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KClcblx0XHRpZiAocm9vdC5yaWdodCAtIGNvbnRhaW5lci5yaWdodCA+IDApIHtcblx0XHRcdHRoaXMuY3VycmVudEluZGV4KHRoaXMuZGF0YS5sZW5ndGggLSAxKVxuXHRcdFx0cmV0dXJuIHRydWVcblx0XHR9XG5cdFx0aWYgKHJvb3QubGVmdCAtIGNvbnRhaW5lci5sZWZ0IDwgMCkge1xuXHRcdFx0dGhpcy5jdXJyZW50SW5kZXgoMClcblx0XHRcdHJldHVybiB0cnVlXG5cdFx0fVxuXHRcdHJldHVybiBmYWxzZVxuXHR9XG5cblx0ZGV0ZWN0U3dpcGluZ0xlZnQgPSBlID0+IHtcblx0XHRyZXR1cm4gZS52ZWxvY2l0eVggPCAtdGhpcy5vcHRpb25zLnN3aXBlLnN3aXBlVmVsb2NpdHlcblx0fVxuXG5cdGRldGVjdFN3aXBpbmdSaWdodCA9IGUgPT4ge1xuXHRcdHJldHVybiBlLnZlbG9jaXR5WCA+IHRoaXMub3B0aW9ucy5zd2lwZS5zd2lwZVZlbG9jaXR5XG5cdH1cblxuXHRkZXRlY3RQYW5uaW5nTGVmdCA9IGUgPT4ge1xuXHRcdHJldHVybiBlLnZlbG9jaXR5WCA8IDEgJiYgZS5kaXN0YW5jZSA8IC10aGlzLmNhcm91c2VsSXRlbVdpZHRoVmFyICogMS41XG5cdH1cblxuXHRkZXRlY3RQYW5uaW5nUmlnaHQgPSBlID0+IHtcblx0XHRyZXR1cm4gZS52ZWxvY2l0eVggPiAxICYmIGUuZGlzdGFuY2UgPCB0aGlzLmNhcm91c2VsSXRlbVdpZHRoVmFyICogMS41XG5cdH1cblxuXHR2aXNpYmxlRWxlbWVudHMoKSB7XG5cdFx0cmV0dXJuIHRoaXMuZGF0YS5sZW5ndGggLSB0aGlzLmN1cnJlbnRCcmVha3BvaW50KCkubnVtYmVyXG5cdH1cblxuXHRuZXh0U2xpZGUgPSAoKSA9PiB7XG5cdFx0dGhpcy5hZGRBbmltYXRpb25DbGFzcygpXG5cblx0XHRpZiAodGhpcy5kYXRhLmxlbmd0aCA+IDEpIHtcblx0XHRcdGlmICghdGhpcy5pbmZpbml0ZU1vZGUoKSAmJiB0aGlzLnZpc2libGVFbGVtZW50cygpIDwgdGhpcy5jdXJyZW50SW5kZXgoKSkge1xuXHRcdFx0XHR0aGlzLmdvVG9JbmRleCh0aGlzLnZpc2libGVFbGVtZW50cygpKVxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dGhpcy5nb1RvSW5kZXgodGhpcy5jdXJyZW50SW5kZXgoKSArIDEpXG5cdFx0XHR9XG5cdFx0fVxuXHRcdHNldFRpbWVvdXQoKCkgPT4ge1xuXHRcdFx0dGhpcy5yZW1vdmVBbmltYXRpb25DbGFzcygpXG5cdFx0fSwgdGhpcy5vcHRpb25zLmFuaW1hdGlvbi5hbmltYXRpb25UaW1lKVxuXHR9XG5cblx0cHJldlNsaWRlID0gKCkgPT4ge1xuXHRcdHRoaXMuYWRkQW5pbWF0aW9uQ2xhc3MoKVxuXG5cdFx0aWYgKHRoaXMuZGF0YS5sZW5ndGggPiAxKSB7XG5cdFx0XHRpZiAoIXRoaXMuaW5maW5pdGVNb2RlKCkgJiYgMCA+PSB0aGlzLmN1cnJlbnRJbmRleCgpKSB7XG5cdFx0XHRcdHRoaXMuZ29Ub0luZGV4KHRoaXMuY3VycmVudEluZGV4KDApKVxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dGhpcy5nb1RvSW5kZXgodGhpcy5jdXJyZW50SW5kZXgoKSAtIDEpXG5cdFx0XHR9XG5cdFx0fVxuXHRcdHNldFRpbWVvdXQoKCkgPT4ge1xuXHRcdFx0dGhpcy5yZW1vdmVBbmltYXRpb25DbGFzcygpXG5cdFx0fSwgdGhpcy5vcHRpb25zLmFuaW1hdGlvbi5hbmltYXRpb25UaW1lKVxuXHR9XG5cblx0YWRkSW5maW5pdGVFbG0oKSB7XG5cdFx0dGhpcy5pbmZpbml0ZUVsbVJlZnMgPSBbXVxuXHRcdHRoaXMuaW5maW5pdGVDb250YWluZXIuY2xlYXIoKVxuXHRcdGZvciAobGV0IGkgPSAxOyBpIDw9IHRoaXMuZGF0YS5sZW5ndGg7IGkrKykge1xuXHRcdFx0Y29uc3QgZWxtID0gdGhpcy5pbmZpbml0ZUNvbnRhaW5lci5jcmVhdGVFbWJlZGRlZFZpZXcodGhpcy5jb250ZW50Q29udGVudCwge1xuXHRcdFx0XHQkaW1wbGljaXQ6IHRoaXMuZGF0YVt0aGlzLmRhdGEubGVuZ3RoIC0gaV0sXG5cdFx0XHRcdGluZGV4OiB0aGlzLmRhdGEubGVuZ3RoIC0gaSxcblx0XHRcdH0pXG5cdFx0XHR0aGlzLl9yZW5kZXJlci5zZXRTdHlsZShlbG0ucm9vdE5vZGVzWzBdLCAncG9zaXRpb24nLCAnYWJzb2x1dGUnKVxuXHRcdFx0dGhpcy5fcmVuZGVyZXIuc2V0U3R5bGUoZWxtLnJvb3ROb2Rlc1swXSwgJ3RyYW5zZm9ybScsIGB0cmFuc2xhdGUzZCgtJHsxMDAgKiBpfSUsIDAsMClgKVxuXHRcdFx0dGhpcy5fcmVuZGVyZXIuc2V0U3R5bGUoZWxtLnJvb3ROb2Rlc1swXSwgJ2Rpc3BsYXknLCAnaW5saW5lLWZsZXgnKVxuXHRcdFx0dGhpcy5fcmVuZGVyZXIuc2V0U3R5bGUoZWxtLnJvb3ROb2Rlc1swXSwgJ3Zpc2liaWxpdHknLCAndmlzaWJsZScpXG5cdFx0XHR0aGlzLl9yZW5kZXJlci5zZXRTdHlsZShlbG0ucm9vdE5vZGVzWzBdLCAnd2lkdGgnLCB0aGlzLmNhcm91c2VsSXRlbVdpZHRoVmFyICsgJ3B4Jylcblx0XHRcdHRoaXMuX3JlbmRlcmVyLmFkZENsYXNzKGVsbS5yb290Tm9kZXNbMF0sICdzbGlkZScpXG5cblx0XHRcdGNvbnN0IGVsbTIgPSB0aGlzLmluZmluaXRlQ29udGFpbmVyLmNyZWF0ZUVtYmVkZGVkVmlldyh0aGlzLmNvbnRlbnRDb250ZW50LCB7XG5cdFx0XHRcdCRpbXBsaWNpdDogdGhpcy5kYXRhW2kgLSAxXSxcblx0XHRcdFx0aW5kZXg6IGkgLSAxLFxuXHRcdFx0fSlcblx0XHRcdHRoaXMuX3JlbmRlcmVyLnNldFN0eWxlKGVsbTIucm9vdE5vZGVzWzBdLCAncG9zaXRpb24nLCAnYWJzb2x1dGUnKVxuXHRcdFx0dGhpcy5fcmVuZGVyZXIuc2V0U3R5bGUoZWxtMi5yb290Tm9kZXNbMF0sICdyaWdodCcsIDApXG5cdFx0XHR0aGlzLl9yZW5kZXJlci5zZXRTdHlsZShlbG0yLnJvb3ROb2Rlc1swXSwgJ3RvcCcsIDApXG5cdFx0XHR0aGlzLl9yZW5kZXJlci5zZXRTdHlsZShlbG0yLnJvb3ROb2Rlc1swXSwgJ3RyYW5zZm9ybScsIGB0cmFuc2xhdGUzZCgkezEwMCAqIGl9JSwgMCwwKWApXG5cdFx0XHR0aGlzLl9yZW5kZXJlci5zZXRTdHlsZShlbG0yLnJvb3ROb2Rlc1swXSwgJ2Rpc3BsYXknLCAnaW5saW5lLWZsZXgnKVxuXHRcdFx0dGhpcy5fcmVuZGVyZXIuc2V0U3R5bGUoZWxtMi5yb290Tm9kZXNbMF0sICd2aXNpYmlsaXR5JywgJ3Zpc2libGUnKVxuXHRcdFx0dGhpcy5fcmVuZGVyZXIuc2V0U3R5bGUoZWxtMi5yb290Tm9kZXNbMF0sICd3aWR0aCcsIHRoaXMuY2Fyb3VzZWxJdGVtV2lkdGhWYXIgKyAncHgnKVxuXHRcdFx0dGhpcy5fcmVuZGVyZXIuYWRkQ2xhc3MoZWxtMi5yb290Tm9kZXNbMF0sICdzbGlkZScpXG5cblx0XHRcdGVsbS5kZXRlY3RDaGFuZ2VzKClcblx0XHRcdGVsbTIuZGV0ZWN0Q2hhbmdlcygpXG5cblx0XHRcdHRoaXMuaW5maW5pdGVFbG1SZWZzLnB1c2goZWxtKVxuXHRcdFx0dGhpcy5pbmZpbml0ZUVsbVJlZnMucHVzaChlbG0yKVxuXHRcdH1cblx0fVxuXG5cdHByaXZhdGUgaW5maW5pdGVIYW5kbGVyKCkge1xuXHRcdC8vIHRoaXMucmVtb3ZlUGFubmluZ0NsYXNzKClcblx0XHR0aGlzLmFkZEFuaW1hdGlvbkNsYXNzKClcblx0XHRzZXRUaW1lb3V0KCgpID0+IHtcblx0XHRcdHRoaXMuZ29Ub0luZGV4KHRoaXMuY3VycmVudEluZGV4KCkpXG5cdFx0XHR0aGlzLnJlbW92ZUFuaW1hdGlvbkNsYXNzKClcblx0XHR9LCB0aGlzLm9wdGlvbnMuYW5pbWF0aW9uLmFuaW1hdGlvblRpbWUpXG5cdFx0aWYgKDAgPiB0aGlzLmN1cnJlbnRJbmRleCgpKSB7XG5cdFx0XHR0aGlzLmN1cnJlbnRJbmRleCh0aGlzLmRhdGEubGVuZ3RoIC0gMSlcblx0XHRcdHNldFRpbWVvdXQoKCkgPT4ge1xuXHRcdFx0XHR0aGlzLnJlbW92ZUFuaW1hdGlvbkNsYXNzKClcblx0XHRcdFx0dGhpcy5nb1RvSW5kZXgodGhpcy5jdXJyZW50SW5kZXgodGhpcy5kYXRhLmxlbmd0aCAtIDEpKVxuXHRcdFx0fSwgdGhpcy5vcHRpb25zLmFuaW1hdGlvbi5hbmltYXRpb25UaW1lICsgMTApXG5cdFx0fSBlbHNlIGlmICh0aGlzLmRhdGEubGVuZ3RoIC0gMSA8IHRoaXMuY3VycmVudEluZGV4KCkpIHtcblx0XHRcdHRoaXMuY3VycmVudEluZGV4KDApXG5cdFx0XHRzZXRUaW1lb3V0KCgpID0+IHtcblx0XHRcdFx0dGhpcy5yZW1vdmVBbmltYXRpb25DbGFzcygpXG5cdFx0XHRcdHRoaXMuZ29Ub0luZGV4KHRoaXMuY3VycmVudEluZGV4KDApKVxuXHRcdFx0fSwgdGhpcy5vcHRpb25zLmFuaW1hdGlvbi5hbmltYXRpb25UaW1lICsgMTApXG5cdFx0fVxuXHRcdHJldHVyblxuXHR9XG5cblx0c3RhcnRUaW1lciA9ICgpID0+IHtcblx0XHR0aGlzLnpvbmUucnVuT3V0c2lkZUFuZ3VsYXIoKCkgPT4ge1xuXHRcdFx0dmFyIGF1dG9wbGF5ID0gdGhpcy5hdXRvcGxheU1vZGUoKSBhcyBuZ3hMaWdodEF1dG9wbGF5XG5cdFx0XHRpZiAoYXV0b3BsYXkgJiYgYXV0b3BsYXkuZW5hYmxlZCkge1xuXHRcdFx0XHR0aGlzLmludGVydmFsID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xuXHRcdFx0XHRcdGlmICh0aGlzLnRpbWVMZWZ0ID4gMCkge1xuXHRcdFx0XHRcdFx0dGhpcy50aW1lTGVmdCA9IHRoaXMudGltZUxlZnQgLSAxMDBcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0dGhpcy50aW1lTGVmdCA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoYXV0b3BsYXkuZGVsYXkpKVxuXHRcdFx0XHRcdFx0dGhpcy5hY3Rpb25EZWxheS5uZXh0KGF1dG9wbGF5LmRpcmVjdGlvbiA9PSAnbGVmdCcgPyB0aGlzLnByZXZTbGlkZSA6IHRoaXMubmV4dFNsaWRlKVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSwgMTAwKVxuXHRcdFx0fVxuXHRcdH0pXG5cdH1cblxuXHRwYXVzZVRpbWVyID0gKCkgPT4ge1xuXHRcdHRoaXMuem9uZS5ydW5PdXRzaWRlQW5ndWxhcigoKSA9PiB7XG5cdFx0XHR0cnkge1xuXHRcdFx0XHR2YXIgYXV0b3BsYXkgPSB0aGlzLmF1dG9wbGF5TW9kZSgpIGFzIG5neExpZ2h0QXV0b3BsYXlcblx0XHRcdFx0aWYgKGF1dG9wbGF5ICYmIGF1dG9wbGF5LmVuYWJsZWQpIHtcblx0XHRcdFx0XHR0aGlzLnRpbWVMZWZ0ID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShhdXRvcGxheS5kZWxheSkpXG5cdFx0XHRcdFx0Y2xlYXJJbnRlcnZhbCh0aGlzLmludGVydmFsKVxuXHRcdFx0XHR9XG5cdFx0XHRcdHRoaXMudGltZUxlZnQgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGF1dG9wbGF5LmRlbGF5KSlcblx0XHRcdFx0ZGVsZXRlIHRoaXMuaW50ZXJ2YWxcblx0XHRcdH0gY2F0Y2gge31cblx0XHR9KVxuXHR9XG5cblx0c2Nyb2xsVG9JbmRleChudW1iZXIpIHtcblx0XHR0aGlzLmFkZEFuaW1hdGlvbkNsYXNzKClcblx0XHR0aGlzLmdvVG9JbmRleChudW1iZXIpXG5cdH1cblxuXHRnb1RvSW5kZXggPSBudW1iZXIgPT4ge1xuXHRcdGlmICh0aGlzLmluZmluaXRlTW9kZSgpKSB7XG5cdFx0XHR0aGlzLnBhblRvKC10aGlzLmNhcm91c2VsSXRlbVdpZHRoKCkgKiBudW1iZXIpXG5cdFx0fSBlbHNlIHtcblx0XHRcdGlmIChudW1iZXIgPiAtMSAmJiBudW1iZXIgPD0gdGhpcy5kYXRhLmxlbmd0aCAtIHRoaXMuY3VycmVudEJyZWFrcG9pbnQoKS5udW1iZXIpIHtcblx0XHRcdFx0dGhpcy5jdXJyZW50SW5kZXgobnVtYmVyKVxuXHRcdFx0XHR0aGlzLnBhblRvKC10aGlzLmNhcm91c2VsSXRlbVdpZHRoKCkgKiBudW1iZXIpXG5cdFx0XHR9XG5cdFx0XHRpZiAobnVtYmVyIDw9IC0xKSB7XG5cdFx0XHRcdHRoaXMuY3VycmVudEluZGV4KDApXG5cdFx0XHRcdHRoaXMuZ29Ub0luZGV4KDApXG5cdFx0XHR9XG5cdFx0fVxuXHRcdHRoaXMuY3VycmVudEluZGV4KG51bWJlcilcblx0fVxuXG5cdGluZmluaXRlTW9kZSgpIHtcblx0XHRyZXR1cm4gdGhpcy5vcHRpb25zLmluZmluaXRlXG5cdH1cblxuXHRhdXRvcGxheU1vZGUoKSB7XG5cdFx0aWYgKHRoaXMub3B0aW9ucy5hdXRvcGxheSAmJiB0aGlzLm9wdGlvbnMuYXV0b3BsYXkuZW5hYmxlZCkge1xuXHRcdFx0cmV0dXJuIHRoaXMub3B0aW9ucy5hdXRvcGxheVxuXHRcdH0gZWxzZSB7XG5cdFx0XHRyZXR1cm4gZmFsc2Vcblx0XHR9XG5cdH1cblxuXHRjYWxjdWxhdGVNb3ZlZCA9IGUgPT4ge1xuXHRcdGNvbnN0IG1vdmVkID0gTWF0aC5yb3VuZChNYXRoLmFicyhlLmRlbHRhWCkgLyB0aGlzLmNhcm91c2VsSXRlbVdpZHRoKCkpXG5cdFx0cmV0dXJuIG1vdmVkID4gMCA/IG1vdmVkIDogMVxuXHR9XG5cblx0bW92ZUluZGV4KG1vdmU6IG51bWJlcikge1xuXHRcdHJldHVybiB0aGlzLmN1cnJlbnRJbmRleCgpICsgbW92ZVxuXHR9XG5cblx0aW5pdCgpIHtcblx0XHR0aGlzLnpvbmUucnVuT3V0c2lkZUFuZ3VsYXIoKCkgPT4ge1xuXHRcdFx0aWYgKHRoaXMuZGF0YS5sZW5ndGggPiAxICYmIHRoaXMuc3VmZmljaWVudFNsaWRlcygpKSB7XG5cdFx0XHRcdHZhciBzbGlkZXJNYW5hZ2VyID0gbmV3IEhhbW1lci5NYW5hZ2VyKHRoaXMuZWxlbWVudHMoKS5jb250YWluZXJFbGVtZW50KVxuXHRcdFx0XHRzbGlkZXJNYW5hZ2VyLmFkZChuZXcgSGFtbWVyLlBhbih7IHRocmVzaG9sZDogMCwgcG9pbnRlcnM6IDAgfSkpXG5cdFx0XHRcdHNsaWRlck1hbmFnZXIub24oJ3BhbmxlZnQgcGFucmlnaHQgcGFuZW5kIHBhbmNhbmNlbCcsIChlOiBIYW1tZXIuSGFtbWVySW5wdXQpID0+IHtcblx0XHRcdFx0XHRzd2l0Y2ggKGUudHlwZSkge1xuXHRcdFx0XHRcdFx0Y2FzZSAncGFubGVmdCc6XG5cdFx0XHRcdFx0XHRjYXNlICdwYW5yaWdodCc6XG5cdFx0XHRcdFx0XHRcdHRoaXMucGF1c2VUaW1lcigpXG5cdFx0XHRcdFx0XHRcdGlmICghdGhpcy5ncmFiYmluZykge1xuXHRcdFx0XHRcdFx0XHRcdHRoaXMucmVtb3ZlQW5pbWF0aW9uQ2xhc3MoKVxuXHRcdFx0XHRcdFx0XHRcdHRoaXMuYWRkUGFubmluZ0NsYXNzKClcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRpZiAodGhpcy5vcHRpb25zLmRyYWcuZHJhZ2dhYmxlKSB7XG5cdFx0XHRcdFx0XHRcdFx0dGhpcy5wYW5UbygtdGhpcy5jdXJyZW50ICogdGhpcy5jYXJvdXNlbEl0ZW1XaWR0aFZhciArIDAgKyBlLmRlbHRhWClcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRicmVha1xuXHRcdFx0XHRcdFx0Y2FzZSAncGFuY2FuY2VsJzpcblx0XHRcdFx0XHRcdFx0dGhpcy5yZW1vdmVQYW5uaW5nQ2xhc3MoKVxuXHRcdFx0XHRcdFx0XHR0aGlzLmFkZEFuaW1hdGlvbkNsYXNzKClcblx0XHRcdFx0XHRcdFx0dGhpcy5nb1RvSW5kZXgodGhpcy5jdXJyZW50SW5kZXgoKSlcblx0XHRcdFx0XHRcdFx0YnJlYWtcblx0XHRcdFx0XHRcdGNhc2UgJ3BhbmVuZCc6XG5cdFx0XHRcdFx0XHRcdC8vIGUuZ2VzdHVyZS5zcmNFdmVudC5wcmV2ZW50RGVmYXVsdCgpXG5cblx0XHRcdFx0XHRcdFx0dGhpcy5wYXVzZVRpbWVyKClcblx0XHRcdFx0XHRcdFx0dGhpcy5yZW1vdmVQYW5uaW5nQ2xhc3MoKVxuXHRcdFx0XHRcdFx0XHR0aGlzLmFkZEFuaW1hdGlvbkNsYXNzKClcblxuXHRcdFx0XHRcdFx0XHRsZXQgbW92ZWQgPSB0aGlzLmNhbGN1bGF0ZU1vdmVkKGUpXG5cdFx0XHRcdFx0XHRcdGlmICghdGhpcy5pbmZpbml0ZU1vZGUoKSkge1xuXHRcdFx0XHRcdFx0XHRcdGlmICh0aGlzLm91dE9mQm91bmQoKSkge1xuXHRcdFx0XHRcdFx0XHRcdFx0dGhpcy5zY3JvbGxCYWNrVG9FZGdlKClcblx0XHRcdFx0XHRcdFx0XHRcdHNldFRpbWVvdXQoKCkgPT4ge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHR0aGlzLnJlbW92ZUFuaW1hdGlvbkNsYXNzKClcblx0XHRcdFx0XHRcdFx0XHRcdH0sIHRoaXMub3B0aW9ucy5hbmltYXRpb24uYW5pbWF0aW9uVGltZSlcblx0XHRcdFx0XHRcdFx0XHRcdGJyZWFrXG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdFx0aWYgKHRoaXMub3B0aW9ucy5kcmFnLmRyYWdnYWJsZSkge1xuXHRcdFx0XHRcdFx0XHRcdGlmICh0aGlzLmRldGVjdFBhbm5pbmdMZWZ0KGUpKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHR0aGlzLmFkZEFuaW1hdGlvbkNsYXNzKClcblx0XHRcdFx0XHRcdFx0XHRcdHRoaXMuZ29Ub0luZGV4KHRoaXMubW92ZUluZGV4KCttb3ZlZCkpXG5cdFx0XHRcdFx0XHRcdFx0XHR0aGlzLmluZmluaXRlSGFuZGxlcigpXG5cdFx0XHRcdFx0XHRcdFx0XHRzZXRUaW1lb3V0KCgpID0+IHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0dGhpcy5yZW1vdmVBbmltYXRpb25DbGFzcygpXG5cdFx0XHRcdFx0XHRcdFx0XHR9LCB0aGlzLm9wdGlvbnMuYW5pbWF0aW9uLmFuaW1hdGlvblRpbWUpXG5cblx0XHRcdFx0XHRcdFx0XHRcdGJyZWFrXG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdGlmICh0aGlzLmRldGVjdFBhbm5pbmdSaWdodChlKSkge1xuXHRcdFx0XHRcdFx0XHRcdFx0dGhpcy5hZGRBbmltYXRpb25DbGFzcygpXG5cdFx0XHRcdFx0XHRcdFx0XHRpZiAoMS4wMDAwMDAwMSA8IHRoaXMuY3VycmVudEluZGV4KCkgJiYgdGhpcy5jdXJyZW50SW5kZXgoKSA8IDEuOTk5OTk5OTk5OTk5KSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdHRoaXMuZ29Ub0luZGV4KE1hdGguY2VpbCh0aGlzLm1vdmVJbmRleCgtbW92ZWQpKSlcblx0XHRcdFx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdHRoaXMuZ29Ub0luZGV4KHRoaXMubW92ZUluZGV4KC1tb3ZlZCkpXG5cdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0XHR0aGlzLmluZmluaXRlSGFuZGxlcigpXG5cdFx0XHRcdFx0XHRcdFx0XHRzZXRUaW1lb3V0KCgpID0+IHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0dGhpcy5yZW1vdmVBbmltYXRpb25DbGFzcygpXG5cdFx0XHRcdFx0XHRcdFx0XHR9LCB0aGlzLm9wdGlvbnMuYW5pbWF0aW9uLmFuaW1hdGlvblRpbWUpXG5cblx0XHRcdFx0XHRcdFx0XHRcdGJyZWFrXG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdGlmICh0aGlzLm9wdGlvbnMuc3dpcGUuc3dpcGVhYmxlKSB7XG5cdFx0XHRcdFx0XHRcdFx0aWYgKHRoaXMuZGV0ZWN0U3dpcGluZ0xlZnQoZSkpIHtcblx0XHRcdFx0XHRcdFx0XHRcdHRoaXMubmV4dFNsaWRlKClcblx0XHRcdFx0XHRcdFx0XHRcdHRoaXMuaW5maW5pdGVIYW5kbGVyKClcblx0XHRcdFx0XHRcdFx0XHRcdGlmICghdGhpcy5pbmZpbml0ZU1vZGUoKSkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHR0aGlzLmFkZEFuaW1hdGlvbkNsYXNzKClcblx0XHRcdFx0XHRcdFx0XHRcdFx0aWYgKDAuMDAwMDAwMDEgPCB0aGlzLmN1cnJlbnRJbmRleCgpICYmIHRoaXMuY3VycmVudEluZGV4KCkgPCAwLjk5OTk5OTk5OTk5OSkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdHRoaXMucmVtb3ZlQW5pbWF0aW9uQ2xhc3MoKVxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdHRoaXMuZ29Ub0luZGV4KDApXG5cdFx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRcdGJyZWFrXG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdGlmICh0aGlzLmRldGVjdFN3aXBpbmdSaWdodChlKSkge1xuXHRcdFx0XHRcdFx0XHRcdFx0dGhpcy5wcmV2U2xpZGUoKVxuXHRcdFx0XHRcdFx0XHRcdFx0dGhpcy5pbmZpbml0ZUhhbmRsZXIoKVxuXHRcdFx0XHRcdFx0XHRcdFx0aWYgKCF0aGlzLmluZmluaXRlTW9kZSgpKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGlmICgwLjAwMDAwMDAxIDwgdGhpcy5jdXJyZW50SW5kZXgoKSAmJiB0aGlzLmN1cnJlbnRJbmRleCgpIDwgMC45OTk5OTk5OTk5OTkpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHR0aGlzLmFkZEFuaW1hdGlvbkNsYXNzKClcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHR0aGlzLmdvVG9JbmRleCgwKVxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdHRoaXMucmVtb3ZlQW5pbWF0aW9uQ2xhc3MoKVxuXHRcdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0XHRicmVha1xuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0Ly8gdGhpcy5hZGRBbmltYXRpb25DbGFzcygpXG5cdFx0XHRcdFx0XHQvLyB0aGlzLmdvVG9JbmRleCh0aGlzLmN1cnJlbnRJbmRleCgpKVxuXHRcdFx0XHRcdFx0Ly8gc2V0VGltZW91dCgoKSA9PiB7XG5cdFx0XHRcdFx0XHQvLyBcdHRoaXMucmVtb3ZlQW5pbWF0aW9uQ2xhc3MoKVxuXHRcdFx0XHRcdFx0Ly8gfSwgdGhpcy5vcHRpb25zLmFuaW1hdGlvbi5hbmltYXRpb25UaW1lKVxuXHRcdFx0XHRcdFx0Ly8gZS5nZXN0dXJlLnNyY0V2ZW50LnByZXZlbnREZWZhdWx0KClcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0pXG5cblx0XHRcdFx0cmV0dXJuIHNsaWRlck1hbmFnZXJcblx0XHRcdH1cblx0XHR9KVxuXHR9XG59XG4iXX0=